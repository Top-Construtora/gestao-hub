<div class="page-header">
  <h1 class="page-title">Analytics</h1>
  <app-breadcrumb></app-breadcrumb>
</div>

<div class="table-section">
  <div class="table-header">
    <h2 class="table-title">Métricas e Estatísticas</h2>
    <div class="header-actions">
      <div class="period-selector">
        <button
          class="period-btn"
          [class.active]="selectedPeriod === 'week'"
          (click)="changePeriod('week')">
          Semana
        </button>
        <button
          class="period-btn"
          [class.active]="selectedPeriod === 'month'"
          (click)="changePeriod('month')">
          Mês
        </button>
        <button
          class="period-btn"
          [class.active]="selectedPeriod === 'year'"
          (click)="changePeriod('year')">
          Ano
        </button>
      </div>
      <button class="action-btn" (click)="refreshData()" title="Atualizar dados">
        <i class="fas fa-sync-alt"></i>
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <span>Carregando dados analytics...</span>
  </div>

  <!-- Stats Cards -->
  <div *ngIf="!isLoading" class="stats-section">
    <div class="stats-grid">
      <div *ngFor="let card of statCards" class="stat-card">
        <div class="stat-icon" [style.background-color]="card.bgColor" [style.color]="card.color">
          <i [class]="card.icon"></i>
        </div>
        <div class="stat-content">
          <h3 class="stat-label">{{ card.label }}</h3>
          <div class="stat-value">{{ card.value }}</div>
          <div class="stat-change" [class.positive]="card.changeType === 'positive'" [class.negative]="card.changeType === 'negative'">
            <i [class]="card.changeType === 'positive' ? 'fas fa-arrow-up' : 'fas fa-arrow-down'"></i>
            {{ card.change }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div *ngIf="!isLoading" class="content-section">
    <div class="chart-header">
      <h3>
        <i class="fas fa-chart-line"></i>
        Atividade de Usuários
      </h3>
      <p class="chart-subtitle">Acessos e interações ao longo do tempo</p>
    </div>
    <div class="chart-container">
      <canvas id="userActivityChart"></canvas>
    </div>
  </div>

  <!-- Additional Info -->
  <div *ngIf="!isLoading" class="content-section info-section">
    <div class="info-header">
      <i class="fas fa-info-circle"></i>
      <h3>Sobre os Dados</h3>
    </div>
    <div class="info-content">
      <p>Os dados apresentados nesta página são atualizados em tempo real e refletem as métricas mais importantes do sistema HUB CRM.</p>
      <ul>
        <li>Estatísticas de usuários ativos e inativos</li>
        <li>Monitoramento da saúde do sistema</li>
        <li>Métricas de disponibilidade e performance</li>
        <li>Análise de atividade ao longo do tempo</li>
      </ul>
    </div>
  </div>
</div>
